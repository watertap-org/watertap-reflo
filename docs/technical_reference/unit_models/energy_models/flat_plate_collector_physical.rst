Flat Plate Collector - Physical Model
====================================================

A flat plate collector (FPC) converts solar energy into thermal energy which is transferred into a heat transfer fluid. Solar collectors usually operate
with low and variable energy and do not track the sun, thus requiring minimal maintenance. They can deliver moderate temperatures upto 100 :math:`^o\text{C}`.
The following model uses physical equations to predict the useful heat generated by an FPC as a function of its design, heat transfer fluid and irradiance.
This flat plate model supports steady-state only.


Degrees of Freedom/Variables
------------------
The model has 7 degrees of freedom that should be fixed for the unit to be fully specified.
Typically, the following 5 variables define the input stream and the output state variables.

.. csv-table::
   :header: "Variables", "Variable name", "Symbol", "Unit"

   "Inlet volume flow rate", "``inlet.flow_mass_phase_comp['Liq','H2O']``", ":math:`m_{l}`", ":math:`\text{m}^3 / \text{s}`"
   "Inlet volume flow rate", "``inlet.flow_mass_phase_comp['Vap','H2O']``", ":math:`m_{v}`", ":math:`\text{m}^3 / \text{s}`"
   "Inlet temperature", "``inlet.temperature``", ":math:`T_{f}`", ":math:`\text{K}`"
   "Inlet pressure", "``inlet.pressure``", ":math:`P_{in}`", ":math:`\text{Pa}`"
   "Outlet pressure", "``outlet.pressure``", ":math:`P_{out}`", ":math:`\text{Pa}`"

The following variables must be fixed by the user for a fully defined model.

.. csv-table::
   :header: "Variables", "Variable name", "Symbol", "Unit"

   "Collector area", "``collector_area``", ":math:`A_{c}`",  ":math:`\text{m}^2`"
   "Total irradiance", "``total_irradiance``", ":math:`G_{total}`",  ":math:`\text{W}/\text{m}^2`"


Model Structure
---------------

This flat plate collector model consists of 2 StateBlocks assigned to the inlet and outlet ports of the heating fluid.

* Inlet
* Outlet

The flow rate and temperature at the inlet port must be specified by the user.

Sets
----
The model consists of the phase set included in the property package.

.. csv-table::
   :header: "Description", "Symbol", "Indices"

   "Time", ":math:`t`", "[0]"
   "Phases", ":math:`p`", "['Liq', 'Vap']"
 

Parameters
---------

The following parameters are used and are mutable (except for the test conditions).

.. csv-table::
   :header: "Description", "Parameter Name", "Symbol", "Value", "Units"

   "Number of collectors", "``number_collectors``", ":math:`{n}_{c}`", "1", ":math:`\text{dimensionless}`"
   "Product of cover transmittance (t), and shortwave absorptivity of absorber (a)", "``trans_absorb_prod``", ":math:`\tau\alpha`", "1", ":math:`\text{dimensionless}`"
   "Product of collector heat removal factor (FR), cover transmittance (t), and shortwave absorptivity of absorber (a)", "``FR_ta``", ":math:`{F}_{R}\tau\alpha`", "0.689", ":math:`\text{dimensionless}`"
   "Product of collector heat removal factor (FR) and overall heat loss coeff. of collector (UL)", "``FR_UL``", ":math:`{F}_{R}{U}_{L}`", "3.85", ":math:`\text{W}/\text{m}^2-\text{K}`"
   "Mass flow rate of fluid during characterization test (fixed)", "``mdot_test``", ":math:`\dot{m}_{test}`", "1", ":math:`\text{kg} / \text{s}`"
   "Specific heat capacity of fluid during characterization test (fixed)", "``cp_test``", ":math:`{c}_{ptest}`", "4184", ":math:`\text{J}/\text{kg}-\text{K}`"
   "Specific heat capacity of fluid being used for heat transfer in operation", "``cp_use``", ":math:`{c}_{use}`", "4184", ":math:`\text{J}/\text{kg}-\text{K}`"
   "Pump power", "``pump_power``", ":math:`{P}_{pump}`", "1", ":math:`\text{W}`"
   "Pump efficiency", "``pump_eff``", ":math:`\eta_{pump}`", "1", ":math:`\text{dimensionless}`"
   "Ambient temperature", "``temperature_ambient``", ":math:`{T}_{amb}`", "303.15", ":math:`\text{K}`"
   "Maximum irradiance at the location", "``max_irradiance``", ":math:`{G}_{max}`", "1000", ":math:`\text{W} / \text{m}^2`"
   "Influent minus ambient temperature", "``factor_delta_T``", ":math:`\Delta T`", "0.03", ":math:`\text{K}`"

Equations
---------

The following equations calculate the variables used in estimating heat transfer in a flat plate collector.

.. csv-table::
   :header: "Description", "Variable Name", "Equation", "Units"

   "Product of collector efficiency factor and overall heat loss coefficient at test conditions","``Fprime_UL``", ":math:`F^{'}U_{L} = -(\dot{m}_{test}*{c}_{ptest})/A_{c}* log(1-{F}_{R}{U}_{L}*A_{c}/(\dot{m}_{test}*{c}_{ptest}))`",""
   "Ratio of FRta_use to FRta_test","``ratio_FRta``", ":math:`r = [m_{l}*{c}_{ptest}/A_{c}]*[1 - exp(-A_{c}*F^{'}U_{L}/m_{l}*{c}_{ptest})]/F_{R}U_{L}|_{test}`", ""
   "Useful net heat gain","``net_heat_gain``", ":math:`h_{gain} = {n}_{c}*A_{c}*r*(F_{R}\tau\alpha*G_{total}*\tau\alpha  - F_{R}U_{L}*(T_{f}-{T}_{amb}))`", ":math:`\text{W}`"
   "Rated plant heat capacity", "``heat_load``", ":math:`h_{load} = {n}_{c}*A_{c}*(F_{R}\tau\alpha*G_{total}*\tau\alpha - F_{R}U_{L}*\Delta T )`", ":math:`\text{MW}`"
 

Costing
---------

The FPC capital cost includes direct costs, indirect costs and sales tax. The direct costs include
cost of the collector and a contingency factor. The indirect costs are a fraction of the direct cost
and include cost of land. The land area is assumed to be the total collector area. A fixed operating cost is calculated as a linear function of the FPC heat load.

.. csv-table::
   :header: "Description", "Variable Name", "Equation"

   "Direct capital costs", "``direct_capital_cost``", ":math:`Capital Cost_{direct} = ({n}_{c}*A_{c}*\text{Collector Cost per }m^{2})*(1 + \text{Contingency fraction})`"
   "Indirect capital costs", "``indirect_capital_cost``", ":math:`Capital Cost_{indirect} = Capital Cost_{direct}*\text{indirect capital cost fraction} + \text{Land area}*\text{Cost per acre}`"
   
References
----------

[1] Solar Engineering of Thermal Processes, Duffie and Beckman, 4th ed.
